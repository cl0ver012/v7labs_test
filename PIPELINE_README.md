# Chart Generation Pipeline

A comprehensive pipeline to generate 100+ high-quality, visually diverse charts using PyEcharts and AI.

## 🎯 Features

- **100+ Charts**: 28 chart types × 4 variations each
- **High Visual Variance**: No two charts look similar
- **Professional Quality**: 1280×720px resolution with readable text
- **Synthetic Data**: Coherent, realistic data generated by AI
- **Multiple Themes**: 16 different color themes for variety
- **PNG Export**: Convert HTML charts to PNG images
- **Simple & Reliable**: Example-based generation with smart fallbacks

## 📊 Supported Chart Types (40 Types)

### Basic Charts
- **Bar & Bar3D**: 2D and 3D bar charts
- **Line & Line3D**: 2D and 3D line charts
- **Scatter & Scatter3D**: 2D and 3D scatter plots
- **Pie**: Pie charts with various styles
- **Funnel**: Funnel visualization

### Statistical Charts
- **Boxplot**: Box and whisker plots
- **Heatmap**: Heat map visualization
- **Parallel**: Parallel coordinates
- **Radar**: Radar/spider charts
- **Polar**: Polar coordinate charts

### Geographic Charts
- **Map & Map3D**: 2D and 3D maps
- **Geo**: Geographic visualization
- **MapGlobe**: Globe visualization
- **AMap & BMap**: Alibaba/Baidu maps

### Hierarchical Charts
- **Tree**: Tree diagrams
- **Treemap**: Rectangular treemaps
- **Sunburst**: Radial hierarchy
- **Sankey**: Flow diagrams
- **ThemeRiver**: Stacked stream graphs

### Specialized Charts
- **Calendar**: Calendar heatmap
- **Candlestick**: Financial charts
- **Gauge**: Gauge meters
- **Graph & GraphGL**: Network graphs
- **Liquid**: Liquid fill gauge
- **PictorialBar**: Pictogram charts
- **Surface3D**: 3D surface plots
- **WordCloud**: Word cloud visualization
- **Table**: Table visualization
- **Timeline**: Timeline charts
- **EffectScatter**: Animated scatter
- **Graphic**: Custom graphics
- **Grid & Overlap**: Layout compositions
- **Image**: Image-based charts

## 🚀 Quick Start

### 1. Install Requirements

```bash
# Install pipeline requirements
pip install -r pipeline_requirements.txt

# For PNG conversion (Chrome/Chromium required)
pip install selenium webdriver-manager pillow
```

### 2. Set API Key

```bash
# Add to .env file
ANTHROPIC_API_KEY=your-api-key-here
```

### 3. Generate Charts

```bash
# Generate 112 charts (4 per type × 28 types)
python generate_chart_pipeline.py
```

### 4. Convert to PNG (Optional)

```bash
# Convert all generated HTML files to PNG
python convert_html_to_png.py

# Convert specific folder
python convert_html_to_png.py dump_generation/Bar

# All PNGs will be saved to: ./chart_pngs/
# Each PNG will be exactly 1280×720 pixels

# Convert single file
python convert_html_to_png.py chart.html
```

## 📁 Output Structure

```
dump_generation/
├── Bar/
│   ├── bar_1_20251029_143022.html
│   ├── bar_1_20251029_143022.py
│   └── ...
├── Line/
│   └── ...
├── Scatter/
│   └── ...
└── ... (28 chart type folders)

chart_pngs/                        # All PNG files in one directory
├── Bar_bar_1_20251029_143022.png # 1280×720px
├── Bar_bar_2_20251029_143025.png
├── Line_line_1_20251029_143102.png
└── ... (all converted PNGs)
```

## ⚙️ Configuration

Edit `generate_chart_pipeline.py` to customize:

```python
CHARTS_PER_TYPE = 4  # Number of charts per type (4 × 28 = 112 total)
TARGET_CHART_TYPES = [...]  # 28 chart types (prioritized by reliability)
THEMES = [...]  # 16 available themes
DATA_TOPICS = [...]  # 40+ data topics for variety
```

## 🎨 Chart Specifications

- **Resolution**: 1280×720 pixels
- **Format**: HTML (interactive) + PNG (static)
- **Themes**: 16 different color themes
- **Data**: Synthetic but realistic
- **Labels**: Short, professional titles

## 🛠️ Troubleshooting

### PNG Conversion Issues

If Selenium doesn't work, try the alternative:

```bash
# Install system package
sudo apt-get install wkhtmltopdf  # Linux
brew install wkhtmltopdf           # macOS

# Install Python package
pip install imgkit

# Use in Python
import imgkit
imgkit.from_file('chart.html', 'chart.png', {'width': 1280, 'height': 720})
```

### API Key Issues

- Ensure `ANTHROPIC_API_KEY` is set in `.env`
- Charts will use fallback generation if API fails

### Memory Issues

For large batches, generate in smaller groups:
```python
# Modify TARGET_CHART_TYPES to process fewer types at once
TARGET_CHART_TYPES = ['Bar', 'Line', 'Scatter']  # First batch
```

## 📈 Example Usage

```python
# Custom generation for specific chart type
from generate_chart_pipeline import generate_charts_for_type

# Generate 10 bar charts
generate_charts_for_type('Bar')
```

## 🎯 Use Cases

- **Data Visualization Testing**: Test chart rendering at scale
- **Design System**: Generate chart examples for documentation
- **Machine Learning**: Training data for chart recognition
- **Quality Assurance**: Validate chart generation consistency
- **Portfolio**: Showcase visualization capabilities

## 📝 Notes

- Generation time: ~10-30 seconds per chart (simplified approach is faster)
- PNG conversion: ~5-10 seconds per chart
- Total pipeline: ~1-2 hours for 112 charts
- Disk space: ~50MB for HTML files, ~110MB for PNG files
- Success rate: ~80-95% (complex charts may need special setup)

## 🔧 Advanced Options

### Custom Data Generation

Modify `generate_synthetic_data()` function for specific data patterns:

```python
def generate_synthetic_data(topic: str, chart_type: str, num_points: int = 12):
    # Add custom logic for specific data patterns
    if "time series" in topic:
        # Generate time-based data
        ...
```

### Custom Themes

Add custom theme configurations:

```python
# In generate_chart_code()
custom_colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96E6B3', '#DA6BAF']
```

## 📧 Support

For issues or questions, check the main project README or create an issue in the repository.
